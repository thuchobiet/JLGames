@{
    ViewBag.Title = "Kho Anh";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<header>
    <div class="header-content">
        <div class="header-content-inner">
            <p>dadasd</p>
            <em>dadad</em>
            <hr>
            <h3>dadasdsa</h3>
        </div>
    </div>
</header>

<div class="container">
    <header class="main-header">
        <img style="display:none;" class="spinner" src="/Images/fancybox_loading.gif" alt="loader" />
        <a class="next btn btn-default" href="#">Load more</a>
    </header>
    <div class="gallery"></div>
</div>

@section scripts{
    <script>
        (function($){

            $(".fancybox").fancybox();

            function loop(test, index, item){
                if(test){
                    var box = $('<div class="col-md-4 box_animaux box-'+index+'"></div>');
                    var pola = $('<div class="pola"></div>');
                    var view = $('<div class="view thumb"></div>');
                    var mask = $('<div class="mask"><h2>'+item.name+'</h2><p>'+item.description+'</p><a href="img/ara_bleu.jpg" class="info fancybox" rel="group" title="'+item.id+'" ><div class="alt">Voir</div></a></div>')

                    $('.gallery').prepend(box);
                    box.append(pola);
                    pola.append(view);
                    view.prepend('<img src="'+item.source+'">');
                    view.append(mask);
                }
            }

            $.getJSON('json/photos.json', function(data){
                $.each(data, function(index, item){
                    loopGallery(index <= 2, index, item);
                });
            });

            $('.next').on('click', function(event){
                event.preventDefault();
                var galleryLength = $('.pola').length;
                $.ajax('json/photos.json', {
                    success: function(data){
                        $.each(data, function(index, item){
                            loopGallery(item.id >= galleryLength && item.id < galleryLength + 3, index, item);
                        });
                    },
                    beforeSend: function(){
                        $('.next').hide();
                        $('.spinner').fadeIn();
                    },
                    complete: function(){
                        $('.spinner').hide();
                        $('.next').fadeIn();
                    }
                });
            });


        })(jQuery);

    </script>
}