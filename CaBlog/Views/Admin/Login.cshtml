@{
    Layout = null;
}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Admin Area">
    <meta name="author" content="Jack Lu">
    <title>Dang Nhap - JackLu's Blog</title>
    <!-- Include Core CSS -->
    <!-- Bootstrap core CSS -->
    <link href="@Url.Content("~/Content/bootstrap.min.css")" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="@Url.Content("~/Content/signin.css")" rel="stylesheet">
</head>

<body>

    <div class="container">
        
        <form action="@Url.Content("~/Admin/Login")" method="post" class="form-signin">
            <h2 class="form-signin-heading">Đăng Nhập</h2>
            <label for="username" class="sr-only">Tên đăng nhập</label>
            <input type="text" name="username" id="username" class="form-control" placeholder="Tên đăng nhập" required autofocus>
            <label for="password" class="sr-only">Mật khẩu</label>
            <input type="password" name="password" id="password" class="form-control" placeholder="Mật khẩu" required>
            <button class="btn btn-lg btn-primary btn-block" type="button" id="login" name="login">Đăng Nhập</button>
            <input type="hidden" name="returnUrl" id="returnUrl" value="@ViewBag.ReturnUrl" />
            <div id="message" class="alert alert-info"></div>
        </form>

    </div> <!-- /container -->

    @Scripts.Render("~/bundles/jquery")

    <script>
        $(document).ready(function () {
            $("#login").click(function () {
                $("#message").html("Đang kiểm tra...");
                var data = {
                    "username": $("#username").val(),
                    "password": $("#password").val(),
                    "returnUrl": $("#returnUrl").val()
                };
                $.ajax({
                    url: "/admin/login",
                    type: "POST",
                    data: JSON.stringify(data),
                    dataType: "json",
                    contentType: "application/json",
                    success: function (status) {
                        if (status.success == "true") {
                            $("#message").html("Đăng nhập thành công");
                            window.location.href = status.link;
                        }
                        else
                            $("#message").html("Lỗi đăng nhập");
                    },
                    error: function () {
                        $("#message").html("Lỗi đăng nhập");
                    }
                });
            });
        });

    </script>
</body>
</html>
